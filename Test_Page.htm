<!DOCTYPE html>
<html>
<body>

<p id="UserID">UserID field</p>
<button type="button" onclick="makeUser(2, 'timmy', 20)">Click here</button>

	<!-- The core Firebase JS SDK is always required and must be listed first -->
<script src="https://www.gstatic.com/firebasejs/7.15.5/firebase-app.js"></script>

<!-- TODO: Add SDKs for Firebase products that you want to use
     https://firebase.google.com/docs/web/setup#available-libraries -->
<script src="https://www.gstatic.com/firebasejs/7.15.5/firebase-database.js"></script>

<script>
	// Your web app's Firebase configuration
	var firebaseConfig = {
	apiKey: "AIzaSyDNZNpviaPfoQFRI2ZTIYMT-5b_9QSqB44",
	authDomain: "test-database-29a32.firebaseapp.com",
	databaseURL: "https://test-database-29a32.firebaseio.com",
	projectId: "test-database-29a32",
	storageBucket: "test-database-29a32.appspot.com",
	messagingSenderId: "314893848219",
	appId: "1:314893848219:web:df09a6c4358db732ca403e"
	};
	// Initialize Firebase
	firebase.initializeApp(firebaseConfig);
	//Get reference to Firebase
  	var database = firebase.database();

  	//read the users table, this captures an array
  	database.ref('users/').once('value').then( function(snapshot) {
  		//Log it to check in the browser
  		console.log(snapshot.val());
  		//Reference it because why not
  		arr = snapshot.val();
  		//Make a user with a unique ID based on what we already have
  		makeUser(arr.length, "Tim Man", 42);
  	});

  	//This function overwrites whatever is at users/userID in the table with data
  	//It then updates the text field above with whatever it put in (formatted appropriately)
  	function makeUser(userID, username, userage) {
  		firebase.database().ref('users/' + userID).set({
  			name: username,
  			age: userage
  		});
  		document.getElementById("UserID").innerText = ("Making user with values " + userID + ", " + username + ", " + userage);
  		return;
  	}
	 
</script>


</body>
</html>